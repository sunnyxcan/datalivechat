{# detail_kesalahan_fatal.html - Akan di-include di index.html #}

<div class="flex flex-wrap gap-5 mb-10 items-start">
    
    {# TABEL DATA KESALAHAN FATAL (Generik) #}
    {% if kesalahan_headers and kesalahan_data %}
    <div class="table-kesalahan-fatal w-full bg-white shadow-xl rounded-lg overflow-hidden border border-gray-100 p-4">
        <h2 class="text-2xl font-semibold text-gray-800 mb-4 px-2 pt-2">Data Detail</h2>
        <div class="overflow-x-auto max-h-[calc(100vh-120px)]">
            <table class="data-table w-full text-sm text-left border-collapse table-auto">
                <thead class="text-xs text-white uppercase bg-gray-900 sticky top-0 z-10">
                    <tr>
                        {% for header in kesalahan_headers %}
                        <th scope="col" class="px-6 py-3 whitespace-nowrap">{{ header }}</th>
                        {% endfor %}
                    </tr>
                </thead>
                <tbody>
                    {% for row in kesalahan_data %}
                    <tr class="bg-white border-b hover:bg-indigo-200 transition duration-150"> 
                        {% for cell in row %}
                        <td class="px-6 py-3 align-top link-cell whitespace-normal">
                            <div class="cell-content max-w-[250px] break-words">
                                {# Fungsi render_cell yang akan mengubah URL menjadi tautan biru #}
                                {{ cell | render_cell | safe }}
                            </div>
                        </td>
                        {% endfor %}
                    </tr>
                    {% endfor %}
                    <tr class="summary-total bg-red-600 text-white font-bold hover:bg-red-700 transition duration-150">
                        <td colspan="{{ kesalahan_headers|length }}" class="px-6 py-3 text-base">Total: {{ kesalahan_data|length }} baris</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    {% else %}
    <p class="text-gray-500 italic w-full bg-white shadow-xl rounded-lg p-6">Tidak ada data detail untuk sheet ini.</p>
    {% endif %}

</div>